<!DOCTYPE html>
<html>
  <head>
    <title>About Assertions 6</title>
    <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />


<link rel="stylesheet" href="/css/bootstrap.min.css"/>
<link rel="stylesheet" href="/css/layouts/main.css"/>
<link rel="stylesheet" href="/css/navigators/navbar.css"/>
<link rel="stylesheet" href="/css/plyr.css"/>
<link rel="stylesheet" href="/css/flag-icon.min.css"/>


<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600">


<link rel="stylesheet" href="/fontawesome/css/all.min.css"/>




  

  
  
  
    
  
  

  <link rel="icon" type="image/png" href="/images/site/favicon_hu06b12159330b42430de9fe1d24f1d323_737_42x0_resize_box_3.png" />

<meta property="og:title" content="About Assertions 6" />
<meta property="og:description" content="When testing, it is a situation that happens frequently, where you need to verify two values in a single test method. If those two values are irrelevant to each other, you should define two independent methods for them. However, in case we want to verify a certain relationship between them is satisfied or not, you can’t do so.
 Multi-values Assertion in Hamcrest public class Example { @Test public void example() { String firstName = composeFirstName(); String fullName = composeFullName(); assertThat(firstName, isNotNull()); assertThat(fullName, allOf( isNotNull(), containsString(firstName))); } }   This is an example method for Hamcrest." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://dakusui.github.io/posts/about-assertions-6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-06-25T03:58:57+09:00" />
<meta property="article:modified_time" content="2022-06-25T03:58:57+09:00" />



    
    
<meta name="description" content="About Assertions 6" />
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css"
/>
<link rel="stylesheet" href="/css/layouts/single.css"/>
<link rel="stylesheet" href="/css/navigators/sidebar.css">

<link rel="stylesheet" href="/css/style.css"/>



    




</head>

  <body data-spy="scroll" data-target="#TableOfContents" data-offset="80">
    <div class="container-fluid bg-dimmed wrapper">
      
      
    





  


  




  
  
    
  
  



  
  
    
  
  


<nav class="navbar navbar-expand-xl top-navbar final-navbar shadow">
  <div class="container">
      <button class="navbar-toggler navbar-light" id="sidebar-toggler" type="button" onclick="toggleSidebar()">
      <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand" href="/">
      
        <img src="/images/site/main-logo_hu0b89b0d532b4129df163fd61aecd6233_4741_42x0_resize_box_3.png" alt="Logo">
      Hiroshi Ukai&#39;s blog</a>
    <button class="navbar-toggler navbar-light" id="toc-toggler" type="button" onclick="toggleTOC()">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse lang-selector" id="top-nav-items">
      <ul class="navbar-nav ml-auto">
      
      </ul>
    </div>
  </div>
  
  
    <img src="/images/site/main-logo_hu0b89b0d532b4129df163fd61aecd6233_4741_42x0_resize_box_3.png" class="d-none" id="main-logo" alt="Logo">
  
  
    <img src="/images/site/inverted-logo_hub18d35914e2bf42d303cd42b72caa211_4647_42x0_resize_box_3.png" class="d-none" id="inverted-logo" alt="Inverted Logo">
  
</nav>



      
      
  <section class="sidebar-section" id="sidebar-section">
    <div class="sidebar-holder">
      <div class="sidebar" id="sidebar">
        <form class="mx-auto" method="get" action="/search">
          <input type="text" name="keyword" value="" placeholder="Search" data-search="" id="search-box" />
        </form>
        <div class="sidebar-tree">
          <ul class="tree" id="tree">
            <li id="list-heading"><a href="/posts" data-filter="all">Posts</a></li>
            <div class="subtree">
                

            </div>
          </ul>
        </div>
      </div>
    </div>
  </section>


      
      
<section class="content-section" id="content-section">
  <div class="content">
    <div class="container p-0 read-area">
      
      <div class="hero-area col-sm-12" id="hero-area" style='background-image: url(https://dakusui.github.io/images/default-hero.jpg);'>
      </div>

      
      <div class="page-content">
        <div class="author-profile ml-auto align-self-lg-center">
          <img class="rounded-circle" src='/images/author/avatar_hu700675a3593f2196f90a24bec185a055_32468_120x120_fit_q75_box.jpg' alt="Author Image">
          <h5 class="author-name">Hiroshi Ukai</h5>
          <p>Saturday, June 25, 2022</p>
        </div>

        <div class="title">
          <h1>About Assertions 6</h1>
        </div>
        
        <div class="taxonomy-terms">
            <ul>
            
          </ul>
        </div>
        
        <div class="post-content" id="post-content">
          <div class="paragraph">
<p>When testing, it is a situation that happens frequently, where you need to verify two values in a single test method.
If those two values are irrelevant to each other, you should define two independent methods for them.
However, in case we want to verify a certain relationship between them is satisfied or not, you can’t do so.</p>
</div>
<div class="listingblock">
<div class="title">Multi-values Assertion in Hamcrest</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class Example {
  @Test
  public void example() {
      String firstName = composeFirstName();
      String fullName = composeFullName();

      assertThat(firstName, isNotNull());
      assertThat(fullName, allOf(
          isNotNull(),
          containsString(firstName)));
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is an example method for Hamcrest.
Once a bug is introduced, we will need to go back and forth between code and <code>stdout</code> (or log) to understand what is going on because the first <code>assertThat</code> may mask a verification result of the second <code>assertThat</code>.</p>
</div>
<div class="sect1">
<h2 id="_multi_values_assertion_in_assertj_and_google_truth">Multi-values Assertion in AssertJ and Google Truth</h2>
<div class="sectionbody">
<div class="paragraph">
<p>AssertJ (and Google Truth) has a mechanism to avoid this situation.</p>
</div>
<div class="paragraph">
<p>Following is an example from the AssertJ’s website <a href="#AssertJ_softAssertions">[AssertJ_softAssertions]</a>.</p>
</div>
<div class="listingblock">
<div class="title">&#34;Soft Assertion&#34; example in AssertJ</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class Example {
  public void host_dinner_party_where_nobody_dies() {
    Mansion mansion = new Mansion();
     mansion.hostPotentiallyMurderousDinnerParty();
     // use SoftAssertions instead of direct assertThat methods
    SoftAssertions softly = new SoftAssertions();
    softly.assertThat(mansion.guests()).as(&#34;Living Guests&#34;).isEqualTo(7);
    softly.assertThat(mansion.kitchen()).as(&#34;Kitchen&#34;).isEqualTo(&#34;clean&#34;);
    softly.assertThat(mansion.library()).as(&#34;Library&#34;).isEqualTo(&#34;clean&#34;);
    softly.assertThat(mansion.revolverAmmo()).as(&#34;Revolver Ammo&#34;).isEqualTo(6);
    softly.assertThat(mansion.candlestick()).as(&#34;Candlestick&#34;).isEqualTo(&#34;pristine&#34;);
    softly.assertThat(mansion.colonel()).as(&#34;Colonel&#34;).isEqualTo(&#34;well kempt&#34;);
    softly.assertThat(mansion.professor()).as(&#34;Professor&#34;).isEqualTo(&#34;well kempt&#34;);
    // Don&#39;t forget to call SoftAssertions global verification !
    softly.assertAll();
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will result in the following output.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>org.assertj.core.api.SoftAssertionError:
     The following 4 assertions failed:
     1) [Living Guests] expected:&lt;[7]&gt; but was:&lt;[6]&gt;
     2) [Library] expected:&lt;&#39;[clean]&#39;&gt; but was:&lt;&#39;[messy]&#39;&gt;
     3) [Candlestick] expected:&lt;&#39;[pristine]&#39;&gt; but was:&lt;&#39;[bent]&#39;&gt;
     4) [Professor] expected:&lt;&#39;[well kempt]&#39;&gt; but was:&lt;&#39;[bloodied and dishevelled]&#39;&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>This approach is not the best one because:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>No uniformity with test methods doing checks for only one value.</p>
</li>
<li>
<p>The method <code>sofly.assertAll</code> may not be called.
It can be easily overlooked in a pull request review. <sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Google Truth also offers a completely different style from its &#34;default&#34; style as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class Example {
  @Rule public final Expect expect = Expect.create();

  public void example() {
    expect.that(results).containsExactly(&#34;hello&#34;);
    expect.that(errors).isEmpty();
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_summary_and_the_next_post">Summary and the Next Post</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We’ve walked through the history of (test) assertion libraries.
Early versions of JUnit had a test base class with <code>assert</code> methods.
Then, JUnit bundled the Hamcrest as the first assertion library <sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup>.
Recent years, a newer generation of assertion libraries emerged, AssertJ and Google Truth.
They help users write test code by providing &#34;IDE-friendly&#34; fluent API.
The followings are design considerations, the assertion libraries have taken into account up to this point.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Readable failure messages</p>
</li>
<li>
<p>Avoid fail→fix→run loops</p>
</li>
<li>
<p>&#34;Writability&#34; of test codes</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>However, there are still pain points in the new assertion libraries:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Support for user custom classes</p>
</li>
<li>
<p>Non-uniformed style for Multi-values assertions</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the next few posts, I’ll be introducing a new assertion library &#34;pcond&#34;, which I developed to address all these concerns.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references">References</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a id="AssertJ_softAssertions"></a> <a href="https://joel-costigliola.github.io/assertj/assertj-core-features-highlight.html#soft-assertions">AssertJ Core features highlight#Soft Assertions</a></p>
</div>
</div>
</div>
<div id="footnotes">
<hr/>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. AssertJ has a few ways to avoid having to call the <code>softly.assertAll</code>, however, their styles are all inconsistent with the &#34;default&#34; style of the AssertJ.
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. JUnit4, in JUnit5 it’s not bundled anymore
</div>
</div>

        </div>

        
        <div class="row pl-3 pr-3">
        
        <div class="col-md-6 share-buttons">
        
            <strong>Share on:</strong>
            
            <a class="btn btn-sm facebook-btn" href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fdakusui.github.io%2fposts%2fabout-assertions-6%2f" target="_blank">
              <i class="fab fa-facebook"></i>
            </a>
            
            
                <a class="btn btn-sm twitter-btn" href="https://twitter.com/share?url=https%3a%2f%2fdakusui.github.io%2fposts%2fabout-assertions-6%2f&text=About%20Assertions%206&via=Hiroshi%20Ukai%27s%20blog" target="_blank">
                  <i class="fab fa-twitter"></i>
                </a>
            
            
            
            
            
            
             
            
            
          
          </div>

        
        
          
            
          
          <div class="col-md-6 btn-improve-page">
             
               <a href="https://github.com/dakusui/dakusui.github.io/edit/toha/content/posts/about-assertions-6.adoc" title="Improve this page" target="_blank" rel="noopener">
            
                <i class="fas fa-code-branch"></i>
                Improve this page
              </a>
          </div>
        
        </div>



      
      <hr />
        












<div class="row next-prev-navigator">
  
  
</div>

      <hr />

      
      

      
      

      </div>
    </div>
  </div>
  
  <a id="scroll-to-top" class="btn"><i class="fas fa-chevron-circle-up"></i></a>
  
</section>


      
      
  <section class="toc-section" id="toc-section">
    
  </section>

    </div>

    
    












  
  
    
  

  
  
    
  

  
  

  
  
    
    
      
    
  


  
  
  
    
  

  
  
  

  
  
  
    
  
  

  
  
  

  <footer id="footer" class="container-fluid text-center align-content-center footer pb-2">
    <div class="container pt-5">
      <div class="row text-left">
        
        <div class="col-md-4 col-sm-12">
          <h5>Navigation</h5>
          
          <ul>
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="https://dakusui.github.io#about">About</a>
                </li>
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="https://dakusui.github.io#projects">Projects</a>
                </li>
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="https://dakusui.github.io#recent-posts">Recent Posts</a>
                </li>
              
            
              
            
          </ul>
          
        </div>
        
        
        <div class="col-md-4 col-sm-12">
          <h5>Contact me:</h5>
          <ul>
            
              
                <li><a href=https://github.com/dakusui target="_blank" rel="noopener">
                  <span><i class="fab fa-github"></i></span> <span>dakusui</span>
                </a></li>
              
            
              
                <li><span>Twitter: </span> <span>@______HU</span></li>
              
            
          </ul>
        </div>
        
        
        
          
          <div class="col-md-4 col-sm-12">
            <p>Stay up to date with email notification</p>
            
              <form method='post' action='https://blogtrottr.com'>
              <div class="form-group">
              <input type='email' class="form-control" name='btr_email' placeholder="Enter email"/><br />
              <input type='hidden' name='btr_url' value='https://dakusui.github.ioindex.xml' />
              <input type='hidden' name='schedule_type' value='1' />
              <small id="emailHelp" class="form-text text-muted">By entering your email address, you agree to receive the newsletter of this website.</small>
              <button type="submit" class="btn btn-info"> Submit </button>
              </div>
              </form>
            
          </div>
        
      </div>
    </div>
    
    <hr />
    <div class="container">
      <p id="disclaimer"><strong>Liability Notice:</strong> This theme is under MIT license. So, you can use it for non-commercial, commercial, or private uses. You can modify or distribute the theme without requiring any permission from the theme author. However, the theme author does not provide any warranty or takes any liability for any issue with the theme.</p>
    </div>
    
    
    <hr />
    <div class="container">
      <div class="row text-left">
        <div class="col-md-4">
          <a id="theme" href="https://github.com/hossainemruz/toha" target="_blank" rel="noopener">
            <img src="/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_3.png" alt="Toha Theme Logo">
            Toha
          </a>
        </div>
        <div class="col-md-4 text-center">© 2022 Copyright.</div>
        <div class="col-md-4 text-right">
          <a id="hugo" href="https://gohugo.io/" target="_blank" rel="noopener">Powered by
          <img
            src="/images/hugo-logo.svg"
            alt="Hugo Logo"
            height="18"
          />
          </a>
        </div>
      </div>
    </div>
    
  </footer>


    <script type="text/javascript" src="/js/jquery-3.4.1.min.js"></script>
<script type="text/javascript" src="/js/popper.min.js"></script>
<script type="text/javascript" src="/js/bootstrap.min.js"></script>

<script type="text/javascript" src="/js/navbar.js"></script>
<script type="text/javascript" src="/js/plyr.js"></script>
<script type="text/javascript" src="/js/main.js"></script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js"></script>
<script src="/js/single.js"></script>
<script>
  hljs.initHighlightingOnLoad();
</script>









    
</body>
</html>
